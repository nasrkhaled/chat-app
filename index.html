<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Firebase App is always required and must be first -->
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-app.js"></script>

    <!-- Add additional services that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-functions.js"></script>

    <!-- Comment out (or don't include) services that you don't want to use -->
    <!-- <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-storage.js"></script> -->

    <script src="https://www.gstatic.com/firebasejs/5.8.0/firebase.js"></script>
    <script>
        // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAF4C8pp5dhUsTgFQS8CttcuIT4Yi5Djq8",
    authDomain: "real-7031f.firebaseapp.com",
    databaseURL: "https://real-7031f.firebaseio.com",
    projectId: "real-7031f",
    storageBucket: "real-7031f.appspot.com",
    messagingSenderId: "194214200891"
  };
  firebase.initializeApp(config);
</script>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>OLE</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style2.css" />
    <link rel="stylesheet" href="css/ionicons.min.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900%7CRubik:300,400,500,700,900" rel="stylesheet">


</head>

<body>

    <!-- Header Section Starts-->
    <header id="header-inverse">
        <nav class="navbar navbar-default navbar-fixed-top menu">
            <div class="container">

                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="home.html"><img src="images/olec.png"></a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right main-menu">
                        <li>
                            <a href="home.html" role="button" aria-haspopup="true" aria-expanded="false">Home </a>

                        </li>
                        <li>
                            <a href="index.html" role="button" aria-haspopup="true" aria-expanded="false" class="active-link">Login/Signup</a>

                        </li>

                    </ul>

                </div><!-- /.navbar-collapse -->
            </div><!-- /.container -->
        </nav>
    </header>
    <div id="lp-register">
        <div class="container wrapper">
            <div class="row">
                <div class="col-sm-5">
                    <div class="intro-texts">
                        <h1 class="text-white">Make Cool Friends !!!</h1>
                        <p>Chatting is a social network template that can be used to connect you`re friend easily <br /> <br />Why are you waiting for ? register now.</p>
                        <button class="btn btn-primary">Learn More</button>
                    </div>
                </div>
                <div class="col-sm-6 col-sm-offset-1">
                    <div class="reg-form-container">

                        <!-- Register/Login Tabs-->
                        <div class="reg-options">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#register" data-toggle="tab">Register</a></li>
                                <li><a href="#login" data-toggle="tab">Login</a></li>
                            </ul>
                            <!--Tabs End-->
                        </div>

                        <!--Registration Form Contents-->
                        <div class="tab-content">
                            <div class="tab-pane active" id="register">
                                <h3>Register Now !!!</h3>
                                <p class="text-muted">Be cool and join today. Meet millions</p>

                                <!--Register Form-->
                                <form name="registration_form" id='registration_form' class="form-inline">
                                    <div class="row">
                                        <div class="form-group col-xs-6">
                                            <label for="firstname" class="sr-only">First Name</label>
                                            <input id="firstname" class="form-control input-group-lg" type="text" name="firstname" title="Enter first name" placeholder="First name" required="required" />
                                        </div>
                                        <div class="form-group col-xs-6">
                                            <label for="lastname" class="sr-only">Last Name</label>
                                            <input id="lastname" class="form-control input-group-lg" type="text" name="lastname" title="Enter last name" placeholder="Last name" required="required" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <label for="email" class="sr-only">Email</label>
                                            <input id="email" class="form-control input-group-lg" type="text" name="Email" title="Enter Email" placeholder="Your Email" required="required" autocomplete="on" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <label for="password" class="sr-only">Password</label>
                                            <input id="password" class="form-control input-group-lg" type="password" name="password" title="Enter password" placeholder="Password" required="required" autocomplete="on" />
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="form-group col-xs-6">

                                            <select class="form-control" data-placeholder="Choose a Language..." id="lang" required="required">
                                                <option disabled selected>Language</option>
                                                <option value="AF">Afrikanns</option>
                                                <option value="SQ">Albanian</option>
                                                <option value="AR">Arabic</option>
                                                <option value="HY">Armenian</option>
                                                <option value="EU">Basque</option>
                                                <option value="BN">Bengali</option>
                                                <option value="BG">Bulgarian</option>
                                                <option value="CA">Catalan</option>
                                                <option value="KM">Cambodian</option>
                                                <option value="ZH">Chinese (Mandarin)</option>
                                                <option value="HR">Croation</option>
                                                <option value="CS">Czech</option>
                                                <option value="DA">Danish</option>
                                                <option value="NL">Dutch</option>
                                                <option value="EN">English</option>
                                                <option value="ET">Estonian</option>
                                                <option value="FJ">Fiji</option>
                                                <option value="FI">Finnish</option>
                                                <option value="FR">French</option>
                                                <option value="KA">Georgian</option>
                                                <option value="DE">German</option>
                                                <option value="EL">Greek</option>
                                                <option value="GU">Gujarati</option>
                                                <option value="HE">Hebrew</option>
                                                <option value="HI">Hindi</option>
                                                <option value="HU">Hungarian</option>
                                                <option value="IS">Icelandic</option>
                                                <option value="ID">Indonesian</option>
                                                <option value="GA">Irish</option>
                                                <option value="IT">Italian</option>
                                                <option value="JA">Japanese</option>
                                                <option value="JW">Javanese</option>
                                                <option value="KO">Korean</option>
                                                <option value="LA">Latin</option>
                                                <option value="LV">Latvian</option>
                                                <option value="LT">Lithuanian</option>
                                                <option value="MK">Macedonian</option>
                                                <option value="MS">Malay</option>
                                                <option value="ML">Malayalam</option>
                                                <option value="MT">Maltese</option>
                                                <option value="MI">Maori</option>
                                                <option value="MR">Marathi</option>
                                                <option value="MN">Mongolian</option>
                                                <option value="NE">Nepali</option>
                                                <option value="NO">Norwegian</option>
                                                <option value="FA">Persian</option>
                                                <option value="PL">Polish</option>
                                                <option value="PT">Portuguese</option>
                                                <option value="PA">Punjabi</option>
                                                <option value="QU">Quechua</option>
                                                <option value="RO">Romanian</option>
                                                <option value="RU">Russian</option>
                                                <option value="SM">Samoan</option>
                                                <option value="SR">Serbian</option>
                                                <option value="SK">Slovak</option>
                                                <option value="SL">Slovenian</option>
                                                <option value="ES">Spanish</option>
                                                <option value="SW">Swahili</option>
                                                <option value="SV">Swedish </option>
                                                <option value="TA">Tamil</option>
                                                <option value="TT">Tatar</option>
                                                <option value="TE">Telugu</option>
                                                <option value="TH">Thai</option>
                                                <option value="BO">Tibetan</option>
                                                <option value="TO">Tonga</option>
                                                <option value="TR">Turkish</option>
                                                <option value="UK">Ukranian</option>
                                                <option value="UR">Urdu</option>
                                                <option value="UZ">Uzbek</option>
                                                <option value="VI">Vietnamese</option>
                                                <option value="CY">Welsh</option>
                                                <option value="XH">Xhosa</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-xs-6">
                                            <input id="phone" class="form-control input-group-lg" type="text" name="phone" placeholder="phone" required="required" />


                                        </div>

                                        <div class="row">
                                            <p class="birth"><strong>Date of Birth</strong></p>
                                            <div class="form-group col-sm-4 col-xs-4">
                                                <label for="month" class="sr-only"></label>
                                                <select class="form-control" id="day" required="required">
                                                    <option disabled selected>Day</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-sm-4 col-xs-4">
                                                <label for="month" class="sr-only"></label>
                                                <select class="form-control" id="month" required="required">
                                                    <option disabled selected>Month</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-sm-4 col-xs-4">
                                                <label for="year" class="sr-only"></label>
                                                <select class="form-control" id="year" required="required">
                                                    <option disabled selected>Year</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group gender">
                                                <label class="radio-inline">
                                                    <input type="radio" value="Male" name="gender" class="gender" checked>Male
                                                </label>

                                                <label class="radio-inline">
                                                    <input type="radio" value="Female" name="gender" class="gender">Female
                                                </label>
                                            </div>

                                        </div>
                                    </div>
                                </form>
                                <!--Register Now Form Ends-->
                                <p><a href="#">Already have an account?</a></p>
                                <button class="btn btn-primary" onclick="reg()">Register Now</button>
                            </div>
                            <!--Registration Form Contents Ends-->

                            <!--Login-->
                            <div class="tab-pane" id="login">
                                <h3>Login</h3>
                                <p class="text-muted">Log into your account</p>

                                <!--Login Form-->
                                <form name="Login_form" id='Login_form'>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <label for="my-email" class="sr-only">Email</label>
                                            <input id="my-email" class="form-control input-group-lg" type="text" name="Email" title="Enter Email" placeholder="Your Email" autocomplete="on"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-xs-12">
                                            <label for="my-password" class="sr-only">Password</label>
                                            <input id="my-password" class="form-control input-group-lg" type="password" name="password" title="Enter password" placeholder="Password" autocomplete="on"/>
                                        </div>
                                    </div>
                                </form>
                                <!--Login Form Ends-->
                                <p><a href="#" onclick="forgetpass()">Forgot Password?</a></p>
                                <button class="btn btn-primary" onclick="log()">Login Now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-sm-offset-6">

                    <!--Social Icons-->
                    <ul class="list-inline social-icons">
                        <li><a href="#"><i class="icon ion-social-facebook"></i></a></li>
                        <li><a href="#"><i class="icon ion-social-twitter"></i></a></li>
                        <li><a href="#"><i class="icon ion-social-googleplus"></i></a></li>
                        <li><a href="#"><i class="icon ion-social-pinterest"></i></a></li>
                        <li><a href="#"><i class="icon ion-social-linkedin"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>


    <div class="copyright">
        <p>OLEC-Team © 2019. All rights reserved</p>
    </div>

    <!-- Scripts
    ================================================= -->
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.appear.min.js"></script>
    <script src="js/jquery.incremental-counter.js"></script>
    <script src="js/script.js"></script>
    <script>
        //    firebase.auth().onAuthStateChanged(function(user) {
        //          if (user) {
        //           window.location="message.html";
        //          } else {
        //           
        //          }
        //        });
        var fph =[];
        function reg() {

            var fname = $("#firstname").val();
            var lname = $("#lastname").val();
            var name = $("#firstname").val() + " " + $("#lastname").val();
            var email = $("#email").val();
            var password = $("#password").val();
            var lang = $("#lang").val();
            var phone = $("#phone").val();
            var day = $("#day").val();
            var month = $("#month").val();
            var year = $("#year").val();

            var gender = document.registration_form.gender.length;
            for (var i = 0; i < gender; i++) {
                if (document.registration_form.gender[i].checked) {
                    gender = document.registration_form.gender[i].value;
                }
            }

            firebase.database().ref("users").once('value', function(snapshot) {
                            snapshot.forEach(function(childSnapshot) {
                                var cK = childSnapshot.key;
                                var cD = childSnapshot.val();
                                 
                                    fph.push(cD.phone);
                                  
                              

             })
                            
                            if(fph.includes(phone))
                            {
                                alert('Phone number already exists ... Please choose a uniform number');
                            }
                            else
                            {
                                  firebase.auth().createUserWithEmailAndPassword(email, password).then(function() {

                var user = firebase.auth().currentUser;
                var id = user.uid



                firebase.database().ref('users/' + id).set({

                    username: name,
                    firstname: fname,
                    lastname: lname,
                    email: email,
                    phone: phone,
                    language: lang,
                    year: year,
                    month: month,
                    day: day,
                    active: 0,
                    status: "Available",
                    avatar_url: 'https://firebasestorage.googleapis.com/v0/b/real-7031f.appspot.com/o/images%2Favatar.jpg?alt=media&token=4c76b71e-83ca-4eed-aa31-3ff11209a7d0',
          


                }, function(error) {
                    if (error) {
                        alert(error);
                    } else {
                        window.location = "message.html";
                    }
                });


            }).catch(function(error) {

                var errorCode = error.code;
                var errorMessage = error.message;
                alert(errorMessage);
            });
                            }
            });
            
        }



        function log() {
            var myemail = $("#my-email").val();
            var mypassword = $("#my-password").val();
            firebase.auth().signInWithEmailAndPassword(myemail, mypassword).then(function() {
                window.location = "message.html";

            }).catch(function(error) {

                var errorCode = error.code;
                var errorMessage = error.message;
                alert(errorMessage);
            });


        }


        function forgetpass() {
            var myemail = $("#my-email").val();

            firebase.auth().sendPasswordResetEmail(myemail);
            alert("success send pass");
        }


        for (var i = 1; i <= 30; i++) {
            $("#day").append('<option value="' + i + '" >' + i + '</option>')
        }

        for (var i = 1; i <= 12; i++) {
            $("#month").append('<option value="' + i + '" >' + i + '</option>')
        }

        for (var i = 2019; i >= 1960; i--) {
            $("#year").append('<option value="' + i + '" >' + i + '</option>')
        }

    </script>
</body>

</html>
